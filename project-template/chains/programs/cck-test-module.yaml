verbose: true
out: output
vars:
    config:
        mongo_url: mongodb://localhost/project-template
        table: person
        user_id: "u001"
    sharingan_config:
        mongo_url: mongodb://localhost/project-template
        table: person
        show_deleted: true
        user_id: "u001"
    sharingan_projection:
        name: 1
        alias: 1
        _history: 1
        _deleted: 1
    new_data:
        name: "Tono Stark"
        alias: "Ironman"
    newer_data:
        name: "Toni Stark"
series:
    # insert new data
    - (config, new_data, "{}") -> [cck.mongo.core.js insert] -> insert_result_1
    - (config, insert_result_1._id, "{}") -> [cck.mongo.core.js findOne] -> get_one_result
    # update inserted data with a newer one
    - (config, insert_result_1._id, newer_data, "{}") -> [cck.mongo.core.js update] -> update_result
    # insert another data
    - (config, new_data, "{}") -> [cck.mongo.core.js insert] -> insert_result_2
    # delete the last one
    - (config, insert_result_2._id, "{}") -> [cck.mongo.core.js remove] -> delete_result
    # get the data
    - (config, "{}", "{}") -> [cck.mongo.core.js find] -> get_result
    # get it with sharingan activated ...
    - (sharingan_config, "{}", sharingan_projection) -> [cck.mongo.core.js find] -> get_sharingan_result
    # show the result
    - (insert_result_1, get_one_result, update_result, insert_result_2, delete_result, get_result, get_sharingan_result)->->output
