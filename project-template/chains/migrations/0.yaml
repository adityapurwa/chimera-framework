verbose: true
ins: config
out: output
vars:

    # structure
    structure:
        structure:
            name: 'structure'
            table: 'cck.structure'
            valid_fields:
                - 'name'
                - 'table'
                - 'valid_fields'
                - 'script.insert'
                - 'script.update'
                - 'script.delete'
                - 'script.get'
                - 'script.getOne'
                - 'script.preprocess.insert'
                - 'script.preprocess.update'
                - 'script.preprocess.delete'
                - 'script.preprocess.query'
                - 'script.preprocess.row'
                - 'presentations'

    # user
    user:
        structure:
            name: 'user'
            table: 'cms.user'
            valid_fields:
                - 'user_name'
                - 'hashed_password'
                - 'first_name'
                - 'last_name'
                - 'email_address'
                - 'groups'
        data:
            - _id: 'cms.system'
              user_name: 'cms.system'

    # group structure
    group:
        structure:
            name: 'group'
            table: 'cms.group'
            valid_fields:
                - 'group_name'
                - 'description'
        data:
            - _id: 'cms.super_admin'
              group_name: 'Super Admin of CMS'
            - _id: 'cms.admin'
              group_name: 'Admin of CMS'

series:

    # create structure
    - (config, structure, 'cms.system') -> chimera ../cck.structure.create.yaml

    - parallel:
       - (config, user, 'cms.system') -> chimera ../cck.structure.create.yaml
       - (config, group, 'cms.system') -> chimera ../cck.structure.create.yaml
