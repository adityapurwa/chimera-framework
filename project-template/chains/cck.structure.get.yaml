ins: config, table
out: row
verbose: true
series:

    # create configuration and query
    - parallel:
        - (config, "cck.structure") -> chimera cck.config.create.yaml -> structure_config
        - (table) -> (t)=>{return JSON.stringify({'table':t})} -> query

    # get result
    - (structure_config, query) -> node programs/cck.crud.js get -> result

    # return first row of result or empty object
    - parallel:
        - if: "result.rows.length > 0"
          command: |
              (result.rows) -> (rows)=>{return rows[0]} -> row
        - if: "result.rows.length == 0"
          command: |
              () -> ()=>{return JSON.stringify({})} -> row
